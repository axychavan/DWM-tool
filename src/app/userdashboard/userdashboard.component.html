<!-- Navbar -->
<nav class="navbar navbar-expand-sm navbar-light bg-light">
  <span class="navbar-brand mb-0 h1"><i class="bi bi-person-circle"></i>
    Employee Dashboard</span>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav"
    aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="bi bi-list"></i></span>
  </button>
  <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <button type="button" class="btn btn-primary btn-sm mr-2" data-toggle="modal" data-target="#infoModal"><i
            class="bi bi-info-circle"></i>
        </button>
      </li>
      <li class="nav-item">
        <button type="button" class="btn btn-outline-danger btn-sm" data-toggle="modal" data-target="#exampleModal">
          Logout <i class="bi bi-box-arrow-right"></i>
        </button>
      </li>
    </ul>
  </div>
</nav>

<!-- Info Modal -->
<div class="modal fade" id="infoModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        Hi <span *ngFor="let item of user">{{item.name}}</span>,<br>This is an initial release of the application. Bug
        fixes, performance improvements and new features are
        rolling out soon. Please provide us your feedback at - <a
          href="mailto:akshaychavanaxy@gmail.com">akshaychavanaxy@gmail.com</a>
      </div>
      <div class="ml-auto mb-3 mr-3">
        <button type="button" class="btn btn-sm btn-outline-success" data-dismiss="modal">Okay !</button>
      </div>
    </div>
  </div>
</div>

<!-- Logout Warning Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        Are you sure you want to logout ?
      </div>
      <div class="ml-auto mb-3 mr-3">
        <button type="button" class="btn btn-sm btn-outline-primary mr-2" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-sm btn-danger" data-dismiss="modal" (click)="logout()">Logout</button>
      </div>
    </div>
  </div>
</div>

<app-profile></app-profile>

<!-- Record Card Table -->
<div class="card m-3">
  <div class="card-body">
    <div class="mb-3">
      <h3>
        Daily Work Management Records
        <button class="btn btn-sm btn-outline-success" type="button" data-toggle="modal" data-target="#addrecord"
          style="float: right;"><i class="bi bi-plus"></i> Add</button>
      </h3>
    </div>

    <!-- Download dropdown -->
    <div class="dropdown float-right">
      <button type="button" class="btn btn-sm btn-outline-primary" (click)="download_csv()"><i
          class="bi bi-arrow-down-short"></i> Download .csv</button>
    </div>

    <!-- Select Month -->
    <div class="input-group input-group-sm mb-3" style="width: 300px;">
      <div class="input-group-prepend">
        <span class="input-group-text">Select Month</span>
      </div>
      <input [(ngModel)]="month" type="month" class="custom-select" value="currMonth">
      <button type="button" class="btn btn-sm btn-outline-primary" (click)="searchRecords()"><i
          class="bi bi-search"></i></button>
    </div>

    <!-- Record's Table -->
    <table id="records" class="table table-bordered">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Date</th>
          <th scope="col">EmpID</th>
          <th scope="col">ClientID</th>
          <th scope="col">TaskID</th>
          <th scope="col">Duration</th>
          <th scope="col">Description</th>
          <th scope="col" style="width: 50px;">Functions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of employeeSpecificRecords; let i = index">
          <td>{{i + 1}}</td>
          <td>{{item.date | date: 'dd-MM-yyyy'}}</td>
          <td>{{item.empid}}</td>
          <td>{{item.clientid}}</td>
          <td>{{item.taskid}}</td>
          <td>{{item.duration}}</td>
          <td>{{item.description}}</td>
          <td>
            <button type="button" class="btn btn-outline-primary btn-sm
                mr-2" data-toggle="modal" data-target="#updaterecord"><i class="bi bi-pencil-square"></i></button>
            <button type="button" class="btn btn-outline-danger btn-sm" (click)=" delete_Record(item)"><i
                class="bi bi-trash"></i></button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Add record Modal -->
<div class="modal fade" id="addrecord" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle"><i class="bi bi-calendar-plus"></i> Add Record</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="date">Date</label>
            <input [(ngModel)]="addRecord.date" type="date" class="form-control"
              onfocus="this.max = new Date().toISOString().split('T')[0]" id="date">
          </div>
          <div class="form-group col-md-6">
            <label for="duration">Duration</label>
            <div class="dropdown">
              <button class="btn btn-light dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" style="width: 100%; text-align: left;">
                Select hours ...
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <option class="dropdown-item">0</option>
                <option class="dropdown-item">1</option>
                <option class="dropdown-item">2</option>
                <option class="dropdown-item">3</option>
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="client">Client</label>
            <div class="dropdown">
              <button class="btn btn-light dropdown-toggle" type="button" id="client" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" style="width: 100%; text-align: left;">
                Select Client ...
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <option class="dropdown-item" *ngFor="let item of clients">{{item.name}}</option>
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="task">Task</label>
            <div class="dropdown">
              <button class="btn btn-light dropdown-toggle" type="button" id="task" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" style="width: 100%; text-align: left;">
                Select Task ...
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <option class="dropdown-item" *ngFor="let item of tasks">{{item.description}}</option>
              </div>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="description">Description</label>
          <textarea [(ngModel)]="addRecord.description" class="form-control" id="description" rows="2"
            placeholder="Description"></textarea>
        </div>

        <div class="text-center">
          <button type="button" class="btn btn-sm btn-outline-success" data-dismiss="modal" (click)="add_Record()"><i
              class="bi bi-plus"></i>
            Add</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Update record Modal -->
<div class="modal fade" id="updaterecord" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Update Record</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="date">Date</label>
            <input type="date" class="form-control" onfocus="this.max=new Date().toISOString().split('T')[0]" id="date">
          </div>
          <div class="form-group col-md-6">
            <label for="duration">Duration</label>
            <div class="dropdown">
              <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" style="width: 100%; text-align: left;">
                Select hours ...
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item">1</a>
                <a class="dropdown-item">2</a>
                <a class="dropdown-item">3</a>
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="project">Project</label>
            <div class="dropdown">
              <button class="btn btn-light dropdown-toggle" type="button" id="project" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" style="width: 100%; text-align: left;">
                Select Project ...
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item">Project 1</a>
                <a class="dropdown-item">Project 2</a>
                <a class="dropdown-item">Project 3</a>
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <label for="task">Task</label>
            <div class="dropdown">
              <button class="btn btn-light dropdown-toggle" type="button" id="task" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" style="width: 100%; text-align: left;">
                Select Task ...
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item">Task 1</a>
                <a class="dropdown-item">Task 1</a>
                <a class="dropdown-item">Task 1</a>
              </div>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="description">Description</label>
          <textarea class="form-control" id="description" rows="2" placeholder="Description"></textarea>
        </div>

        <div class="text-center">
          <button type="button" class="btn btn-outline-success" data-dismiss="modal"><i
              class="bi bi-clipboard-check"></i> Update</button>
        </div>
      </div>
    </div>
  </div>
</div>

<app-emergencycontact></app-emergencycontact>

<app-footer></app-footer>